# 附录：输出格式选择 - XML vs JSON vs Markdown

> 日期: 2026-01-11
> 来源: 从初步设计构想拆分

---

## 一、为什么默认使用 XML 格式？

### 1.1 Claude/LLM 对 XML 的原生偏好

Anthropic 在其官方文档和最佳实践中明确推荐使用 XML 格式作为结构化数据的输出格式：

```xml
<available_skills>
  <skill>
    <name>pdf</name>
    <description>PDF 处理工具包</description>
  </skill>
</available_skills>
```

**原因**：
- **标签明确语义** - `<skill>` 比 JSON 的 `{}` 更容易被模型理解
- **边界清晰** - 开闭标签 `<tag></tag>` 让 LLM 更容易识别数据边界
- **解析稳定性** - LLM 生成 XML 时比 JSON 更不容易出现语法错误（少一个逗号就炸）

### 1.2 三种格式对比

| 格式 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| **XML** | LLM 原生友好、语义清晰、边界明确 | 冗长、人类阅读不如 JSON 直观 | AI 解析 |
| **JSON** | 简洁、程序解析方便、前端友好 | LLM 容易生成语法错误、嵌套多时难解析 | 程序处理 |
| **Markdown Table** | 人类阅读最友好 | LLM 解析困难、不适合程序处理 | 人工查看 |

### 1.3 实际应用场景

在 **MCP Server** 场景下：

```
AI 请求: sx_list
         ↓
返回 XML 格式
         ↓
AI 解析 XML，决定下一步操作
         ↓
调用 sx_read 读取具体技能
```

XML 让 AI 更容易从返回结果中提取信息，减少解析错误。

### 1.4 设计中保留了灵活性

在设计中，`sx_list` 工具支持多种格式：

```typescript
format: {
  type: "string",
  enum: ["json", "xml", "table"],  // 支持三种格式
  description: "输出格式，默认 xml"
}
```

用户可以根据需要选择格式，默认使用 XML 是因为它对 AI 最友好。

### 1.5 参考来源

这个设计参考了：
- **Anthropic 官方示例** - Claude 的 tool use 示例中大量使用 XML
- **OpenSkills 项目** - 也使用 XML 作为默认输出格式
- **SkillForge** - 在 sp_triage 的返回值设计中使用 XML

---

## 二、总结

XML 格式是为了让 **AI 更容易解析**，而不是为了人类阅读：
- 如果是给**人**看 → Markdown Table 更好
- 如果是给**程序**解析 → JSON 更好
- 如果是给 **AI** 解析 → **XML 最好**

---

*本文档为 Skillix 输出格式选择附录，从初步设计构想拆分而来*
