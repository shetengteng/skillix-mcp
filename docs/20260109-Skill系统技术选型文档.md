# Skill 系统技术选型文档

> 日期: 2026-01-09

## 一、背景

在 Cursor 中实现类似 Claude Code 的 Skill 系统，需要选择合适的技术方案。本文档对比分析各种可行方案，为技术选型提供参考。

## 二、需求分析

### 2.1 核心功能

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 列出技能 | P0 | 展示所有可用技能的名称和描述 |
| 读取技能 | P0 | 加载指定技能的详细内容 |
| 创建技能 | P1 | 快速创建符合规范的技能文件 |
| 更新技能 | P1 | 修改现有技能内容 |
| 自动建议 | P2 | AI 自动识别并建议创建技能 |
| 反馈收集 | P3 | 收集技能使用反馈用于优化 |

### 2.2 非功能需求

| 需求 | 说明 |
|------|------|
| 易用性 | 简单的命令或工具调用 |
| 可维护性 | 代码结构清晰，易于扩展 |
| 兼容性 | 支持 macOS、Linux、Windows |
| 依赖性 | 尽量减少外部依赖 |
| 集成性 | 与 Cursor 良好集成 |

## 三、方案对比

### 3.1 方案概览

| 方案 | 技术栈 | 调用方式 | 复杂度 | 推荐场景 |
|------|--------|----------|--------|----------|
| Shell 脚本 | Bash | `bash script.sh` | 低 | 快速原型 |
| Node.js CLI | TypeScript/JS | `npx xxx` | 中 | 团队使用 |
| Python CLI | Python | `python xxx.py` | 中 | Python 团队 |
| MCP Server | TypeScript | 工具调用 | 高 | 深度集成 |
| 纯 Rules | Markdown | 文件读取 | 最低 | 最简场景 |

### 3.2 详细对比

#### 方案一：Shell 脚本

**实现方式**：
```bash
bash scripts/skill-loader.sh list
bash scripts/skill-loader.sh read pdf
bash scripts/skill-loader.sh create my-skill "description"
```

**优点**：
- ✅ 零依赖，任何系统都能运行
- ✅ 实现简单，快速上手
- ✅ 易于调试和修改

**缺点**：
- ❌ 功能有限，难以实现复杂逻辑
- ❌ 错误处理能力弱
- ❌ Windows 兼容性需要额外处理
- ❌ 代码可读性较差

**适用场景**：快速原型、个人使用、简单需求

---

#### 方案二：Node.js CLI

**实现方式**：
```bash
npx skill-manager list
npx skill-manager read pdf
npx skill-manager create my-skill --desc "description"
```

**技术栈**：
- TypeScript / JavaScript
- Commander.js (命令行解析)
- Inquirer.js (交互式选择)
- Chalk (终端美化)

**优点**：
- ✅ 功能强大，易于扩展
- ✅ 丰富的 npm 生态
- ✅ 可发布到 npm，用户通过 npx 直接使用
- ✅ 跨平台兼容性好
- ✅ 代码可维护性强

**缺点**：
- ❌ 需要 Node.js 环境
- ❌ 实现复杂度中等
- ❌ 首次运行需要下载依赖

**适用场景**：团队使用、需要分发、功能较复杂

**参考项目**：[OpenSkills](https://github.com/numman-ali/openskills)

---

#### 方案三：Python CLI

**实现方式**：
```bash
python skill_manager.py list
python skill_manager.py read pdf
python skill_manager.py create my-skill --desc "description"
```

**技术栈**：
- Python 3.x
- Click / Typer (命令行框架)
- Rich (终端美化)

**优点**：
- ✅ 语法简洁，易于阅读
- ✅ 丰富的标准库
- ✅ 适合数据处理场景

**缺点**：
- ❌ 需要 Python 环境
- ❌ 分发不如 npm 方便
- ❌ 版本兼容性问题

**适用场景**：Python 技术栈团队、数据处理相关技能

---

#### 方案四：MCP Server

**实现方式**：
```json
// Cursor MCP 配置
{
  "mcpServers": {
    "skill-manager": {
      "command": "node",
      "args": ["/path/to/skill-mcp-server/dist/index.js"]
    }
  }
}
```

**AI 调用方式**：
```
使用 list_skills 工具查看可用技能
使用 read_skill 工具读取 pdf 技能
使用 create_skill 工具创建新技能
```

**技术栈**：
- TypeScript
- @modelcontextprotocol/sdk
- Zod (参数验证)

**优点**：
- ✅ 与 Cursor 原生集成
- ✅ AI 直接调用工具，无需执行 Bash 命令
- ✅ 更好的错误处理和返回值
- ✅ 可以实现复杂的交互逻辑
- ✅ 类型安全

**缺点**：
- ❌ 实现复杂度最高
- ❌ 需要配置 MCP 服务器
- ❌ 调试相对困难
- ❌ 目前没有现成的开源实现

**适用场景**：需要与 Cursor 深度集成、复杂交互需求

---

#### 方案五：纯 Rules

**实现方式**：
```markdown
# .cursor/rules/skill-system.mdc

## 可用技能

| 技能 | 描述 | 路径 |
|------|------|------|
| pdf | PDF 处理 | skills/pdf/SKILL.md |

## 使用方式

当需要使用技能时，直接读取对应的 SKILL.md 文件。
```

**优点**：
- ✅ 零依赖
- ✅ 最简单
- ✅ 无需任何脚本

**缺点**：
- ❌ 需要手动维护技能列表
- ❌ 没有自动化
- ❌ 功能最弱

**适用场景**：最简单的场景、技能数量很少

## 四、开源项目参考

### 4.1 OpenSkills

- **GitHub**: [numman-ali/openskills](https://github.com/numman-ali/openskills)
- **技术栈**: TypeScript + Node.js CLI
- **Stars**: 4.4k
- **特点**: 
  - 100% 兼容 Anthropic Skills 规范
  - 支持从 GitHub 安装技能
  - 交互式 TUI

### 4.2 Anthropic 官方 MCP Servers

- **GitHub**: [modelcontextprotocol/servers](https://github.com/modelcontextprotocol/servers)
- **包含**: filesystem、sqlite、github 等多个 MCP 服务器
- **可参考**: 实现 MCP Server 的最佳实践

### 4.3 技能管理 MCP Server

- **现状**: 目前没有专门的开源实现
- **建议**: 如需此方案，需要自行开发

## 五、推荐方案

### 5.1 场景化推荐

| 场景 | 推荐方案 | 理由 |
|------|----------|------|
| 快速验证想法 | Shell 脚本 | 最快实现 |
| 个人使用 | Shell 脚本 或 纯 Rules | 简单够用 |
| 团队内部使用 | Node.js CLI | 功能强大，易分发 |
| 开源发布 | Node.js CLI | npm 生态，用户友好 |
| 深度集成 Cursor | MCP Server | 原生工具调用 |
| 最小依赖 | 纯 Rules | 零依赖 |

### 5.2 综合推荐

**推荐方案：Node.js CLI + Rules 配合**

理由：
1. **成熟方案**: OpenSkills 已验证可行
2. **易于分发**: 通过 npm/npx 分发
3. **功能完整**: 支持所有核心功能
4. **可扩展**: 易于添加新功能
5. **兼容性好**: 跨平台支持

### 5.3 渐进式实现路径

```
阶段 1: Shell 脚本 (快速原型)
   ↓
阶段 2: Node.js CLI (功能完善)
   ↓
阶段 3: MCP Server (深度集成) [可选]
```

## 六、实现建议

### 6.1 如果选择 Shell 脚本

- 使用 `skill-loader.sh` 作为入口
- 配合 `.cursor/rules/` 定义使用规范
- 参考本项目 `examples/skill-loader/` 示例

### 6.2 如果选择 Node.js CLI

- 参考 OpenSkills 的实现
- 使用 TypeScript 确保类型安全
- 发布到 npm 方便用户使用

### 6.3 如果选择 MCP Server

- 基于 `@modelcontextprotocol/sdk` 开发
- 参考官方 servers 仓库的实现
- 定义清晰的工具接口

## 七、总结

| 维度 | Shell | Node.js CLI | Python CLI | MCP Server | 纯 Rules |
|------|-------|-------------|------------|------------|----------|
| 实现复杂度 | ⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐ |
| 功能丰富度 | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐ |
| 用户体验 | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| 依赖要求 | 无 | Node.js | Python | Node.js | 无 |
| 分发便利性 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐ |
| Cursor 集成 | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ |

**最终建议**：根据团队技术栈和需求复杂度选择。大多数场景下，**Node.js CLI** 是最佳平衡点。

---

*本文档为技术选型参考，具体实现可根据实际需求调整*
