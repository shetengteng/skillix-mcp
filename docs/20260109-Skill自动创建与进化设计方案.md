# Skill 自动创建与进化设计方案

> 设计日期: 2026-01-09

## 一、背景与目标

### 1.1 背景

在使用 Skill 系统的过程中，我们发现以下痛点：

1. **手动创建繁琐** - 每次创建技能都需要手动创建文件夹和 SKILL.md
2. **更新不及时** - 技能内容可能过时，但没有机制提醒更新
3. **缺乏智能** - AI 不会主动建议创建技能，即使遇到重复的工作流程

### 1.2 目标

设计一套机制，让 AI 能够：

1. **自动检测** - 识别可复用的工作流程
2. **智能建议** - 在适当时机建议创建技能
3. **辅助创建** - 快速生成符合规范的技能文件
4. **持续进化** - 基于使用反馈优化技能内容

## 二、整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                      Cursor IDE                              │
├─────────────────────────────────────────────────────────────┤
│  .cursor/rules/                                              │
│  ├── skill-system.mdc        # 技能系统入口                  │
│  ├── skill-management.mdc    # 技能管理规范                  │
│  └── skill-auto-suggest.mdc  # 自动建议规则                  │
├─────────────────────────────────────────────────────────────┤
│  scripts/                                                    │
│  ├── skill-loader.sh         # 技能加载器                    │
│  └── skill-create.sh         # 技能创建脚手架                │
├─────────────────────────────────────────────────────────────┤
│  skills/                                                     │
│  ├── pdf/                                                    │
│  │   ├── SKILL.md            # 技能主文件                    │
│  │   ├── FEEDBACK.md         # 使用反馈（可选）              │
│  │   └── scripts/            # 辅助脚本（可选）              │
│  └── xlsx/                                                   │
│      └── SKILL.md                                            │
└─────────────────────────────────────────────────────────────┘
```

## 三、核心组件设计

### 3.1 技能管理规则 (skill-management.mdc)

**职责**：定义技能创建和更新的规范

**内容要点**：

1. **SKILL.md 格式规范**
   - YAML frontmatter 必须包含 name 和 description
   - description 要清晰说明何时使用该技能
   - 正文使用 Markdown 格式

2. **目录结构规范**
   ```
   skill-name/
   ├── SKILL.md           # 必需
   ├── scripts/           # 可选：辅助脚本
   ├── references/        # 可选：参考文档
   └── assets/            # 可选：资源文件
   ```

3. **创建流程**
   - 使用脚手架脚本创建基础结构
   - AI 填充具体内容
   - 用户审核确认

4. **更新流程**
   - 读取现有 SKILL.md
   - 保持格式规范
   - 记录变更原因

### 3.2 自动建议规则 (skill-auto-suggest.mdc)

**职责**：定义何时建议创建/更新技能

**触发条件**：

| 条件 | 说明 | 建议动作 |
|------|------|----------|
| 重复模式 | 同类任务执行 3 次以上 | 建议创建技能 |
| 复杂流程 | 任务包含 5+ 步骤 | 建议创建技能 |
| 专业领域 | 涉及特定领域知识 | 建议创建技能 |
| 技能失效 | 技能指令执行失败 | 建议更新技能 |
| 用户反馈 | 用户表示技能不好用 | 建议更新技能 |

**建议格式**：

```
💡 技能建议

检测到这是一个可复用的工作流程。

建议技能名称: xxx
建议技能描述: xxx

是否要创建这个技能？回复 "是" 或 "创建技能" 来创建。
```

### 3.3 技能创建脚手架 (skill-create.sh)

**职责**：快速创建技能基础结构

**使用方式**：

```bash
bash scripts/skill-create.sh <skill-name> "<skill-description>"
```

**生成内容**：

1. 创建 `skills/<skill-name>/` 目录
2. 生成 `SKILL.md` 模板
3. 输出后续步骤提示

### 3.4 技能加载器 (skill-loader.sh)

**职责**：管理技能的查询和加载

**命令**：

| 命令 | 说明 |
|------|------|
| `list` | 列出所有可用技能 |
| `read <name>` | 加载指定技能内容 |
| `info <name>` | 显示技能元数据 |
| `help` | 显示帮助信息 |

## 四、工作流程

### 4.1 技能创建流程

```
用户完成复杂任务
       ↓
AI 检测到可复用模式
       ↓
AI 输出建议: "是否创建技能？"
       ↓
用户确认 "是"
       ↓
AI 执行: bash scripts/skill-create.sh "name" "desc"
       ↓
AI 根据任务内容填充 SKILL.md
       ↓
用户审核/修改
       ↓
技能创建完成
```

### 4.2 技能使用流程

```
用户提出任务请求
       ↓
AI 执行: bash scripts/skill-loader.sh list
       ↓
AI 判断是否匹配某个技能
       ↓
如果匹配，执行: bash scripts/skill-loader.sh read <name>
       ↓
AI 按照技能指令完成任务
       ↓
（可选）记录使用反馈
```

### 4.3 技能更新流程

```
技能使用过程中发现问题
       ↓
AI 或用户提出更新需求
       ↓
AI 读取现有 SKILL.md
       ↓
AI 根据需求修改内容
       ↓
保持格式规范
       ↓
用户确认更新
```

## 五、技能进化机制（高级）

### 5.1 反馈收集

在每个技能目录下创建 `FEEDBACK.md`，记录：

```markdown
# 使用反馈

## 2026-01-09
- 任务: 提取 PDF 表格
- 结果: 成功
- 备注: 无

## 2026-01-08
- 任务: 合并多个 PDF
- 结果: 失败
- 问题: 缺少大文件处理说明
- 建议: 添加分批处理指南
```

### 5.2 定期优化

当反馈累积到一定数量时，AI 可以：

1. 分析反馈模式
2. 识别常见问题
3. 提出优化建议
4. 用户确认后更新

### 5.3 版本管理

使用 Git 管理技能变更：

```bash
# 创建技能后
git add skills/new-skill/
git commit -m "feat: add new-skill for xxx"

# 更新技能后
git add skills/existing-skill/SKILL.md
git commit -m "fix: update existing-skill to handle xxx"
```

## 六、实现优先级

### 第一阶段：基础功能

1. ✅ 技能加载器 (skill-loader.sh)
2. ✅ 技能系统规则 (skill-system.mdc)
3. ⬜ 技能创建脚手架 (skill-create.sh)
4. ⬜ 技能管理规则 (skill-management.mdc)

### 第二阶段：智能建议

5. ⬜ 自动建议规则 (skill-auto-suggest.mdc)
6. ⬜ 建议触发逻辑

### 第三阶段：持续进化

7. ⬜ 反馈收集机制
8. ⬜ 定期优化流程
9. ⬜ 版本管理集成

## 七、注意事项

### 7.1 避免过度自动化

- 技能创建/更新应该由用户确认
- 避免 AI 自动修改文件而不通知用户
- 保持用户对技能内容的控制权

### 7.2 保持简洁

- SKILL.md 应该简洁明了
- 避免过度复杂的技能结构
- 遵循 Anthropic 的"简洁是关键"原则

### 7.3 渐进式加载

- 元数据（name + description）始终可见
- 正文按需加载
- 资源文件更深层按需加载

## 八、总结

本设计方案提供了一套完整的 Skill 自动创建与进化机制：

1. **Rules 配置** - 定义规范和触发条件
2. **脚手架脚本** - 快速创建技能结构
3. **加载器脚本** - 管理技能查询和加载
4. **反馈机制** - 收集使用情况（可选）
5. **进化流程** - 持续优化技能内容

通过这套机制，AI 可以：
- 智能识别可复用的工作流程
- 建议创建新技能
- 辅助填充技能内容
- 基于反馈持续优化

同时保持用户对技能的完全控制权。

---

*本文档为设计方案，具体实现可根据实际需求调整*
